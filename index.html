<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ø§Ù„Ù…Ø±ØµØ¯ Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠ - ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙÙŠ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø³Ø© ÙˆØ§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø© ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§">
    <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø± - Ø§Ù„Ù…Ø±ØµØ¯ Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- Ø¥Ø¶Ø§ÙØ© polyfills Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© -->
    <script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@3.0.0/dist/fetch.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/url-search-params-polyfill@8.1.0/index.min.js"></script>
</head>
<body>
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header>
        <div class="logo">
            <h1>ğŸ“° Ø§Ù„Ù…Ø±ØµØ¯ Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠ</h1>
        </div>
        <div class="hamburger-menu" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„" role="button" tabindex="0">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="#">Ø³ÙŠØ§Ø³Ø©</a></li>
                <li><a href="#">Ø§Ù‚ØªØµØ§Ø¯</a></li>
                <li><a href="#">Ø±ÙŠØ§Ø¶Ø©</a></li>
                <li><a href="#">ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</a></li>
            </ul>
        </nav>
    </header>

    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø± -->
    <main>
        <section id="news-detail">
            <div class="container">
                <div id="detail-content">
                    <noscript>
                        <p class="error-message">ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ JavaScript Ù„Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±</p>
                    </noscript>
                    <p class="loading-message">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±...</p>
                </div>
                
                <article class="news-article" style="display: none;">
                    <h2 id="detail-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±</h2>
                    <p id="detail-date" class="news-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø¨Ø±: </p>
                    <div class="news-image-container">
                        <img id="detail-image" src="images/default-news.jpg" alt="ØµÙˆØ±Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ù„Ø®Ø¨Ø±" class="news-image">
                    </div>
                    <div class="news-content">
                        <p id="detail-content-text">Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±...</p>
                    </div>
                    <div class="news-tags">
                        <span class="tag" id="detail-category">Ø¹Ø§Ù…</span>
                    </div>
                    <div class="news-actions">
                        <a href="index.html" class="btn-back">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                        <button class="btn-share" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø®Ø¨Ø±">Ù…Ø´Ø§Ø±ÙƒØ©</button>
                    </div>
                </article>
                
                <div id="error-message" class="error-container" style="display: none;">
                    <p>âš ï¸ <span id="error-text">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¨Ø±!</span></p>
                    <a href="index.html" class="btn-back">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                </div>
            </div>
        </section>
        
        <section id="related-news" style="display: none;">
            <div class="container">
                <h3>Ø£Ø®Ø¨Ø§Ø± Ø°Ø§Øª ØµÙ„Ø©</h3>
                <div class="news-container" id="related-news-container"></div>
            </div>
        </section>
    </main>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø§Ù„Ù…Ø±ØµØ¯ Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠ</p>
            <div class="social-media">
                <a href="#" aria-label="ØªÙˆÙŠØªØ±"><img src="images/twitter-icon.png" alt="ØªÙˆÙŠØªØ±"></a>
                <a href="#" aria-label="ÙÙŠØ³Ø¨ÙˆÙƒ"><img src="images/facebook-icon.png" alt="ÙÙŠØ³Ø¨ÙˆÙƒ"></a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // ØªÙ†ÙÙŠØ° Ù‚Ø§Ø¦Ù…Ø© Ù‡Ù…Ø¨Ø±ØºØ±
            document.querySelector('.hamburger-menu').addEventListener('click', function() {
                document.querySelector('nav').classList.toggle('active');
            });
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø¨Ø± Ù…Ù† URL
            const urlParams = new URLSearchParams(window.location.search);
            const newsId = urlParams.get('id');
            
            // Ø¹Ù†Ø§ØµØ± DOM
            const loadingMessage = document.querySelector('.loading-message');
            const articleElement = document.querySelector('.news-article');
            const errorContainer = document.getElementById('error-message');
            const errorText = document.getElementById('error-text');
            const relatedNewsSection = document.getElementById('related-news');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø¨Ø±
            if (!newsId) {
                showError("Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨");
                return;
            }
            
            // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
            getNewsData()
                .then(newsData => {
                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                    const news = newsData.find(item => item.id == newsId);
                    
                    if (news) {
                        displayNewsDetails(news);
                        displayRelatedNews(newsData, news.id, news.category);
                    } else {
                        showError("Ø§Ù„Ø®Ø¨Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!");
                    }
                })
                .catch(error => {
                    console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±:", error);
                    showError("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
                });
            
            // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
            function getNewsData() {
                const cachedData = localStorage.getItem('newsData');
                if (cachedData && (JSON.parse(cachedData).timestamp > Date.now() - 3600000)) {
                    return Promise.resolve(JSON.parse(cachedData).data);
                } else {
                    return fetch("news.json")
                        .then(response => {
                            if (!response.ok) {
                                throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
                            }
                            return response.json();
                        })
                        .then(data => {
                            localStorage.setItem('newsData', JSON.stringify({
                                timestamp: Date.now(),
                                data: data
                            }));
                            return data;
                        });
                }
            }
            
            // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±
            function displayNewsDetails(news) {
                // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                loadingMessage.style.display = 'none';
                
                // ØªØ¹ÙŠÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¨Ø±
                document.getElementById("detail-title").textContent = news.title;
                document.getElementById("detail-date").textContent = `ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø¨Ø±: ${news.date}`;
                document.getElementById("detail-image").src = news.image;
                document.getElementById("detail-image").alt = `ØµÙˆØ±Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©: ${news.title}`;
                document.getElementById("detail-content-text").textContent = news.content;
                
                if (news.category) {
                    document.getElementById("detail-category").textContent = news.category;
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®Ø¨Ø±
                articleElement.style.display = 'block';
                
                // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ù‡ÙŠÙƒÙ„ÙŠØ© Ù„Ù„Ø®Ø¨Ø±
                addStructuredData(news);
            }
            
            // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø°Ø§Øª Ø§Ù„ØµÙ„Ø©
            function displayRelatedNews(newsData, currentId, category) {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø°Ø§Øª Ø§Ù„ØµÙ„Ø© (Ù†ÙØ³ Ø§Ù„ÙØ¦Ø©ØŒ Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ)
                const relatedNews = newsData
                    .filter(item => item.id != currentId && item.category === category)
                    .slice(0, 3); // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 3 Ø£Ø®Ø¨Ø§Ø±
                
                if (relatedNews.length > 0) {
                    const relatedContainer = document.getElementById('related-news-container');
                    
                    relatedNews.forEach(news => {
                        const newsCard = document.createElement("div");
                        newsCard.classList.add("news-card");
                        
                        const newsLink = document.createElement("a");
                        newsLink.href = `index2.html?id=${news.id}`;
                        newsLink.classList.add("news-link");
                        
                        const newsImage = document.createElement("img");
                        newsImage.src = news.image;
                        newsImage.alt = `ØµÙˆØ±Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©: ${news.title}`;
                        newsImage.classList.add("news-thumbnail");
                        newsImage.loading = "lazy"; // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¨Ø´ÙƒÙ„ ÙƒØ³ÙˆÙ„
                        newsLink.appendChild(newsImage);
                        
                        const newsTitle = document.createElement("h3");
                        newsTitle.textContent = news.title;
                        newsLink.appendChild(newsTitle);
                        
                        newsCard.appendChild(newsLink);
                        relatedContainer.appendChild(newsCard);
                    });
                    
                    relatedNewsSection.style.display = 'block';
                }
            }
            
            // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
            function showError(message) {
                loadingMessage.style.display = 'none';
                errorText.textContent = message;
                errorContainer.style.display = 'block';
            }
            
            // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ù‡ÙŠÙƒÙ„ÙŠØ© Ù„Ù„Ø®Ø¨Ø±
            function addStructuredData(news) {
                const structuredData = {
                    "@context": "https://schema.org",
                    "@type": "NewsArticle",
                    "headline": news.title,
                    "datePublished": news.date,
                    "image": news.image,
                    "articleBody": news.content,
                    "publisher": {
                        "@type": "Organization",
                        "name": "Ø§Ù„Ù…Ø±ØµØ¯ Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠ",
                        "logo": {
                            "@type": "ImageObject",
                            "url": "https://example.com/logo.png"
                        }
                    }
                };
                
                const script = document.createElement('script');
                script.type = 'application/ld+json';
                script.textContent = JSON.stringify(structuredData);
                document.head.appendChild(script);
            }
        });
    </script>
</body>
</html>
